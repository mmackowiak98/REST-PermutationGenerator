package com.example.wordgenerator.recruitmenttask.word.repository.test;

import com.example.wordgenerator.recruitmenttask.entity.Words;
import com.example.wordgenerator.recruitmenttask.repository.WordRepository;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import java.util.List;
import java.util.Optional;
@SpringBootTest
public class WordsRepoTest {

    @Autowired
    private WordRepository wordRepository;

    @Test
    public void isWordFindingById(){
        Words words1 = new Words("Word");
        wordRepository.save(words1);
        Optional<Words> byId = wordRepository.findById(1L);
        Assertions.assertEquals(byId.get(), words1);
    }

    @Test
    public void isEntityGettingSaved(){
        Words words = new Words("Word");
        wordRepository.save(words);
        List<Words> all = wordRepository.findAll();
        Assertions.assertFalse(all.isEmpty());
    }

    @Test
    public void isSavingCorrectNumbersOfEntity(){
        Words words = new Words("Word");
        wordRepository.save(words);
        List<Words> all = wordRepository.findAll();
        Assertions.assertEquals(1,all.size());
    }


    @Test
    public void isFindingAllSaved(){
        Words words1 = new Words("Word");
        Words words2 = new Words("Word");
        Words words3 = new Words("Word");
        wordRepository.save(words1);
        wordRepository.save(words2);
        wordRepository.save(words3);
        List<Words> all = wordRepository.findAll();
        Assertions.assertEquals(3,all.size());

    }

    @Test
    public void isIdAutoGenerated() {
        Words words = new Words("Word");
        wordRepository.deleteAll();
        wordRepository.save(words);
        Optional<Words> byId = wordRepository.findById(1L);

        Assertions.assertEquals(1, byId.get().getId());
    }
}
